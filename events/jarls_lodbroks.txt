
##################################################
# Forge the Lodbroks
# by Ewan Cowhig Croft
# 0031-0041
##################################################

#	Founder event
jarls_lodbroks.0031 = {
	type = character_event
	title = jarls_lodbroks.0031.t
	desc = jarls_lodbroks.0031.desc
	theme = faith
	left_portrait = {
		character = scope:founder
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:leader
		animation = personality_zealous
	}

	trigger = {
		# DLC check.
		has_fp1_dlc_trigger = yes
	}

	immediate = {
		play_music_cue = "mx_cue_crusade_starts"
		# Found the Lodbroks.
		form_the_lodbroks_scripted_effect = yes
		#Notify other players.
		every_player = {
			limit = {
				OR = {
					religion = religion:germanic_religion
					save_temporary_scope_as = neighbouring_players
					scope:founder = {
						any_neighboring_and_across_water_top_liege_realm_owner = { this = scope:neighbouring_players }
					}
				}
				#Obviously, we exempt scope:founder themselves.
				NOT = { this = scope:founder }
			}
			#Vassal players get a separate event.
			if = {
				limit = {
					any_liege_or_above = { this = scope:founder }
				}
				trigger_event = jarls_lodbroks.0032
			}
			#Everyone else within range gets a less personal version.
			else = { trigger_event = jarls_lodbroks.0033 }
		}
	}

	# For our ancestors!
	option = {
		name = {
			trigger = { has_trait = cynical }
			text = jarls_lodbroks.0031.a.cynical
		}
		name = {
			trigger = {
				NOT = { has_trait = cynical }
			}
			text = jarls_lodbroks.0031.a.fallback
		}

		# Get your bonus troops.
		form_the_lodbroks_maa_reward_effect = yes

		stress_impact = {
			# Usually bad form to give stress impact on single event options, but if you're cynical and taking this option, you *know* you're doing it for purely cynical reasons.
			zealous = massive_stress_impact_loss
			cynical = medium_stress_impact_gain
		}
		ai_chance = {
			# Single option event doesn't need ai_chance sorted.
			base = 100
		}
	}
}

#	Vassal notification event
jarls_lodbroks.0032 = {
	type = character_event
	title = jarls_lodbroks.0032.t
	desc = jarls_lodbroks.0032.desc
	theme = faith
	left_portrait = {
		character = scope:founder
		animation = personality_honorable
	}
	right_portrait = {
		character = scope:leader
		# Same-faith characters see them as zealous.
		triggered_animation = {
			trigger = { faith = scope:leader.faith }
			animation = personality_zealous
		}
		# Everyone else sees them as pirates.
		triggered_animation = {
			trigger = {
				NOT = { faith = scope:leader.faith }
			}
			animation = schadenfreude
		}
	}

	trigger = {
		# DLC check.
		has_fp1_dlc_trigger = yes
	}

	immediate = {
		play_music_cue = "mx_cue_crusade_starts"
		# Lodbroks founded.
		scope:founder = {
			show_as_tooltip = { form_the_lodbroks_scripted_effect = yes }
		}
	}

	# Huzzah!
	option = {
		name = jarls_lodbroks.0032.a
		trigger = { faith = scope:founder.faith }

		# Scope:founder gets a boost.
		scope:founder = {
			show_as_tooltip = { form_the_lodbroks_maa_reward_effect = yes }
		}

		# No stress impact for notification event.
		ai_chance = {
			# Player-only, AI choice irrelevant.
			base = 100
		}
	}

	# So, they're pirates?
	option = {
		name = jarls_lodbroks.0032.b

		# Scope:founder gets a boost.
		scope:founder = {
			show_as_tooltip = { form_the_lodbroks_maa_reward_effect = yes }
		}

		# No stress impact for notification event.
		ai_chance = {
			# Player-only, AI choice irrelevant.
			base = 100
		}
	}
}

#	Distant players notification event
jarls_lodbroks.0033 = {
	type = character_event
	title = jarls_lodbroks.0033.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { exists = scope:lodbroks_autofounded }
				desc = jarls_lodbroks.0033.desc.autofounded
			}
			desc = jarls_lodbroks.0033.desc.decision_founded
		}
		desc = jarls_lodbroks.0033.desc.outro
	}
	theme = faith
	left_portrait = {
		character = scope:founder
		animation = personality_bold
	}
	right_portrait = {
		character = scope:leader
		# Same-faith characters see them as zealous.
		triggered_animation = {
			trigger = { faith = scope:leader.faith }
			animation = personality_zealous
		}
		# Everyone else sees them as pirates.
		triggered_animation = {
			trigger = {
				NOT = { faith = scope:leader.faith }
			}
			animation = schadenfreude
		}
	}
	lower_center_portrait = scope:victim

	trigger = {
		# DLC check.
		has_fp1_dlc_trigger = yes
	}

	immediate = {
		play_music_cue = "mx_cue_crusade_starts"
		# Lodbroks founded.
		scope:founder = {
			show_as_tooltip = { form_the_lodbroks_scripted_effect = yes }
		}
	}

	# Wonderous news!
	option = {
		name = jarls_lodbroks.0033.a
		trigger = { faith = scope:founder.faith }

		# Scope:founder gets a boost.
		scope:founder = {
			show_as_tooltip = { form_the_lodbroks_maa_reward_effect = yes }
		}

		# No stress impact for notification event.
		ai_chance = {
			# Player-only, AI choice irrelevant.
			base = 100
		}
	}

	# Just another band of raiders.
	option = {
		name = {
			trigger = {
				religion = { is_in_family = rf_pagan }
			}
			text = jarls_lodbroks.0033.b.competition
		}
		name = {
			trigger = {
				NOT = {
					religion = { is_in_family = rf_pagan }
				}
			}
			text = jarls_lodbroks.0033.b.heathens
		}

		# Scope:founder gets a boost.
		scope:founder = {
			show_as_tooltip = { form_the_lodbroks_maa_reward_effect = yes }
		}

		# No stress impact for notification event.
		ai_chance = {
			# Player-only, AI choice irrelevant.
			base = 100
		}
	}
}
